(function(e){"use strict";function t(t){e.Object.call(this,1,t),n.fixAR(this);var r=this._;r.freq=e(440),r.osc1=new i(r.samplerate),r.osc2=new i(r.samplerate),r.osc1.step=r.cellsize,r.osc2.step=r.cellsize,r.tmp=new n.SignalArray(r.cellsize),r.beats=.5,this.once("init",s)}var n=e.fn,i=e.modules.Oscillator;n.extend(t);var s=function(){this.wave||(this.wave="sin")},r=t.prototype;Object.defineProperties(r,{wave:{set:function(e){this._.osc1.setWave(e),this._.osc2.setWave(e)},get:function(){return this._.osc1.wave}},freq:{set:function(t){this._.freq=e(t)},get:function(){return this._.freq}},beats:{set:function(e){"number"==typeof e&&e>0&&(this._.beats=e)},get:function(){return this._.beats}}}),r.bang=function(){return this._.osc1.reset(),this._.osc2.reset(),this._.emit("bang"),this},r.process=function(e){var t=this._,i=this.cells[0];if(this.tickID!==e){this.tickID=e;var s,r=i.length,a=t.freq.process(e).cells[0][0],o=t.osc1,u=t.osc2,l=t.tmp;for(o.frequency=a-.5*t.beats,o.process(l),s=0;r>s;++s)i[s]=.5*l[s];for(u.frequency=a+.5*t.beats,u.process(l),s=0;r>s;++s)i[s]+=.5*l[s];n.outputSignalAR(this)}return this},n.register("cosc",t)})(timbre);