(function(e){"use strict";function t(t){return i?i:(i=this,e.Object.call(this,1,t),n.fixKR(this),void 0)}if("browser"===e.envtype){var n=e.fn,i=null;n.extend(t);var s={},r=!1,a=!1,o=!1,u=function(e){for(var t=i._,n=i.cells[0],u=e.keyCode*t.mul+t.add,l=0,c=n.length;c>l;++l)n[l]=u;r=e.shiftKey,a=e.ctrlKey,o=e.altKey,s[e.keyCode]||(s[e.keyCode]=!0,i._.emit("keydown",e))},l=function(e){delete s[e.keyCode],i._.emit("keyup",e)},c=t.prototype;Object.defineProperties(c,{shiftKey:{get:function(){return r}},ctrlKey:{get:function(){return a}},altKey:{get:function(){return o}}}),c.start=function(){return window.addEventListener("keydown",u,!0),window.addEventListener("keyup",l,!0),this},c.stop=function(){return window.removeEventListener("keydown",u,!0),window.removeEventListener("keyup",l,!0),this},c.play=c.pause=function(){return this},n.register("keyboard",t);var h={90:48,83:49,88:50,68:51,67:52,86:53,71:54,66:55,72:56,78:57,74:58,77:59,188:60,76:61,190:62,186:63,81:60,50:61,87:62,51:63,69:64,82:65,53:66,84:67,54:68,89:69,55:70,85:71,73:72,57:73,79:74,48:75,80:76},f=n.getClass("ndict");n.register("ndict.key",function(e){var t=new f(e);return t.dict=h,t})}})(timbre);