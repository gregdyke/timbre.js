(function(e){"use strict";if("browser"===e.envtype){var t=e.fn,n=e.modules;t.register("audio.jsonp",function(e){var n=t.getClass("buffer"),i=new n(e);return i.playbackState=t.FINISHED_STATE,i._.isLoaded=!1,Object.defineProperties(i,{isLoaded:{get:function(){return this._.isLoaded}}}),i.load=r,i.loadthis=a,i});var i,s=/(_)?callback=([_\w\d]+)/,r=function(r){var a=this,o=this._,u=new n.Deferred(this),l=arguments,c=1;u.done(function(){a._.emit("done")}),"function"==typeof l[c]&&(u.done(l[c++]),"function"==typeof l[c]&&u.fail(l[c++]));var h,f,p;if(o.script)u.reject();else{h=s.exec(r),f="timbrejs_audiojsonp",h&&(h[1]&&(r=r.replace(h[0],""),r=r.replace(/\?$/,"")),f+="_"+h[2]);var v=function(n,i){var s=a._;n?(a.playbackState=t.PLAYING_STATE,s.samplerate=n.samplerate,s.channels=n.channels,s.bufferMix=null,s.buffer=n.buffer,s.phase=0,s.phaseIncr=n.samplerate/e.samplerate,s.duration=1e3*n.duration,s.currentTime=0,s.isReversed&&(s.phaseIncr*=-1,s.phase=n.buffer[0].length+s.phaseIncr),a._.emit("loadedmetadata")):u.reject(i)},d=function(){a._.isLoaded=!0,a._.plotFlush=!0,a._.emit("loadeddata"),u.resolveWith(a)};window[f]=function(e,t){var s={type:t,data:i(e)};(new n.Decoder).decode(s,v,d),delete window[f],o.script=null},p=document.createElement("script"),p.src=r,document.body.appendChild(p),o.script=p}return u.promise()},a=function(){return r.apply(this,arguments),this};i="function2"==typeof atob?function(e){for(var t=atob(e),n=Array(t.length),i=0,s=n.length;s>i;++i)n[i]=t.charCodeAt(i);return new Uint8Array(n)}:function(){var e=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,62,0,0,0,63,52,53,54,55,56,57,58,59,60,61,0,0,0,0,0,0,0,0,1,2,3,4,5,6,7,8,9,10,11,12,13,14,15,16,17,18,19,20,21,22,23,24,25,0,0,0,0,0,0,26,27,28,29,30,31,32,33,34,35,36,37,38,39,40,41,42,43,44,45,46,47,48,49,50,51,0,0,0,0,0]);return function(t){var n,i,s,r,a=new Uint8Array(t.length),o=t.length;for(r=0;o>r&&"="!==t.charAt(r);r++)a[r]=e[t.charCodeAt(r)];if(n=r,1===n%4)return null;if(n-=0|(n+3)/4,!n)return null;if(i=0,s=0,n>1)for(;n-2>s;)a[s]=255&a[i]<<2|3&a[i+1]>>>4,a[s+1]=255&a[i+1]<<4|15&a[i+2]>>>2,a[s+2]=255&a[i+2]<<6|63&a[i+3],i+=4,s+=3;return n>s&&(a[s]=255&a[i]<<2|3&a[i+1]>>>4),n>++s&&(a[s]=255&a[i+1]<<4|15&a[i+2]>>>2),a.subarray(0,n)}}()}})(timbre);