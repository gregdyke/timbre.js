(function(e){"use strict";function t(t){e.Object.call(this,1,t),n.fixAR(this);var i=this._;i.freq=e(100),i.gain=e(2),i.sr=e.samplerate,i.t=1/i.sr,i.b0=i.a1=i.wcD=0,i.s1=i.s2=i.s3=i.s4=0}var n=e.fn;n.extend(t);var i=t.prototype;Object.defineProperties(i,{freq:{set:function(t){this._.freq=e(t)},get:function(){return this._.freq}},gain:{set:function(t){this._.gain=e(t)},get:function(){return this._.gain}}}),i.bang=function(){var e=this._;return e.s1=e.s2=e.s3=e.s4=0,e.emit("bang"),this},i.process=function(e){var t=this.cells[0],i=this._;if(this.tickID!==e){this.tickID=e,n.inputSignalAR(this);var s=i.gain.process(e).cells[0][0];s=s>4?4:0>s?0:s;var r,a,o,u,c,l,h,f,p=i.s1,v=i.s2,d=i.s3,m=i.s4,g=i.freq.process(e).cells[0][0],y=i.t,_=i.wcD,b=i.a1,w=i.b0,k=t.length;for(i.prevFreq!==g&&(i.prevFreq=g,_=2*Math.tan(y*Math.PI*g)*i.sr,0>_&&(_=0),r=y*_,w=r/(r+2),b=(r-2)/(r+2),i.b0=w,i.a1=b,i.wcD=_),f=0;k>f;++f)a=m+w*(d+w*(v+w*p)),l=t[f],h=(w*w*w*w*l+a)/(1+w*w*w*w*s),t[f]=100*h,o=l-s*h,u=o,c=w*u+p,p=w*u-b*c,c=w*u+v,v=w*u-b*c,u=c,c=w*u+d,d=w*u-b*c,m=w*c-b*h;for(i.s1=p,i.s2=v,i.s3=d,i.s4=m,f=0;k>f;++f)a=t[f],t[f]=-1>a?-1:a>1?1:a;n.outputSignalAR(this)}return this},n.register("MoogFF",t)})(timbre);